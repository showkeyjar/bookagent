# æ™ºèƒ½æŠ€æœ¯å›¾ä¹¦è‡ªåŠ¨ç”Ÿæˆç³»ç»Ÿ

## ç³»ç»Ÿæ¦‚è¿°

æ™ºèƒ½æŠ€æœ¯å›¾ä¹¦è‡ªåŠ¨ç”Ÿæˆç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½å†™ä½œåŠ©æ‰‹ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·éœ€æ±‚è‡ªåŠ¨ç”Ÿæˆç»“æ„å®Œæ•´ã€å†…å®¹ä¸“ä¸šçš„æŠ€æœ¯ç±»å›¾ä¹¦ã€‚ç³»ç»Ÿæ”¯æŒWordæ¨¡æ¿å®šåˆ¶ã€å¤šè½®äº¤äº’å¼ç¼–è¾‘ã€è‡ªåŠ¨å›¾è¡¨ç”Ÿæˆç­‰åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆå®ŒæˆæŠ€æœ¯æ–‡æ¡£åˆ›ä½œã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ ä¸“æ³¨æ€æƒ³ä¼ é€’çš„ç•Œé¢è®¾è®¡
- **ç®€æ´ç›´è§‚**ï¼šå»é™¤å¹²æ‰°å…ƒç´ ï¼Œè®©ç”¨æˆ·ä¸“æ³¨äºå†…å®¹åˆ›ä½œ
- **æ™ºèƒ½å¼•å¯¼**ï¼šåˆ†æ­¥éª¤çš„åˆ›ä½œæµç¨‹ï¼Œä»æƒ³æ³•åˆ°æˆä¹¦
- **å®æ—¶é¢„è§ˆ**ï¼šæ‰€è§å³æ‰€å¾—çš„ç¼–è¾‘ä½“éªŒ

### ğŸ¤– AI é©±åŠ¨çš„æ™ºèƒ½åˆ›ä½œ
- **æ€æƒ³å¯å‘**ï¼šAI åŠ©æ‰‹å¸®åŠ©æ¿€å‘åˆ›ä½œçµæ„Ÿ
- **å†…å®¹ç”Ÿæˆ**ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡æŠ€æœ¯å†…å®¹
- **æ™ºèƒ½ä¼˜åŒ–**ï¼šè‡ªåŠ¨ä¼˜åŒ–æ–‡å­—è¡¨è¾¾å’Œå†…å®¹ç»“æ„

### ğŸ“š ç»“æ„åŒ–çš„å›¾ä¹¦ç®¡ç†
- **æ¨¡æ¿ç³»ç»Ÿ**ï¼šæä¾›å¤šç§å›¾ä¹¦æ¨¡æ¿ï¼Œå¿«é€Ÿå¼€å§‹åˆ›ä½œ
- **ç« èŠ‚ç®¡ç†**ï¼šå¯è§†åŒ–çš„ç« èŠ‚ç»“æ„ï¼Œæ”¯æŒæ‹–æ‹½é‡ç»„
- **è¿›åº¦è·Ÿè¸ª**ï¼šå®æ—¶æ˜¾ç¤ºåˆ›ä½œè¿›åº¦å’Œå­—æ•°ç»Ÿè®¡

### ğŸ¨ ç°ä»£åŒ–çš„ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **æµç•…åŠ¨ç”»**ï¼šç²¾å¿ƒè®¾è®¡çš„äº¤äº’åŠ¨æ•ˆ
- **æ·±è‰²æ¨¡å¼**ï¼šæŠ¤çœ¼çš„æ·±è‰²ä¸»é¢˜ï¼ˆå³å°†æ¨å‡ºï¼‰

### ğŸ”§ å¼ºå¤§çš„ç¼–è¾‘åŠŸèƒ½
- **Markdown æ”¯æŒ**ï¼šæ”¯æŒ Markdown è¯­æ³•ï¼Œä¸“ä¸šæ’ç‰ˆ
- **å®æ—¶åä½œ**ï¼šå¤šäººåŒæ—¶ç¼–è¾‘å’Œè¯„è®ºï¼ˆå¼€å‘ä¸­ï¼‰
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šå®Œæ•´çš„ç‰ˆæœ¬å†å²è®°å½•ï¼Œæ”¯æŒç‰ˆæœ¬å¯¹æ¯”å’Œå›æ»š
- **å¯¼å‡ºåŠŸèƒ½**ï¼šæ”¯æŒå¤šç§æ ¼å¼å¯¼å‡ºï¼ˆPDFã€Wordã€HTMLï¼‰

## æŠ€æœ¯æ ˆ

- **åç«¯**ï¼šPython 3.9+, FastAPI, SQLAlchemy, PostgreSQL, Redis
- **AI**ï¼šOpenAI GPT-4, æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹
- **å­˜å‚¨**ï¼šMinIO (S3å…¼å®¹å¯¹è±¡å­˜å‚¨)
- **å‰ç«¯**ï¼šReact, TypeScript, Ant Design (å¾…å®ç°)
- **éƒ¨ç½²**ï¼šDocker, Nginx

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

**åç«¯**ï¼š
- Python 3.9+
- PostgreSQL 13+ (å¯é€‰ï¼Œå¼€å‘é˜¶æ®µå¯è·³è¿‡)
- Redis 6+ (å¯é€‰ï¼Œå¼€å‘é˜¶æ®µå¯è·³è¿‡)

**å‰ç«¯**ï¼š
- Node.js 16+
- npm æˆ– yarn

### æ–¹å¼ä¸€ï¼šå¿«é€Ÿä½“éªŒï¼ˆæ¨èï¼‰

#### 1. å¯åŠ¨å‰ç«¯ç•Œé¢

```bash
# Windows ç”¨æˆ·
start-frontend.bat

# macOS/Linux ç”¨æˆ·
chmod +x start-frontend.sh
./start-frontend.sh
```

å‰ç«¯å°†åœ¨ http://localhost:3000 å¯åŠ¨ï¼Œä½ å¯ä»¥ç«‹å³ä½“éªŒå®Œæ•´çš„ç”¨æˆ·ç•Œé¢ã€‚

#### 2. å¯åŠ¨åç«¯ APIï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£…åŸºç¡€ä¾èµ–
pip install fastapi uvicorn python-dotenv

# å¯åŠ¨ç®€åŒ–ç‰ˆ API
python simple_main.py
```

åç«¯å°†åœ¨ http://localhost:8000 å¯åŠ¨ã€‚

### æ–¹å¼äºŒï¼šå®Œæ•´å¼€å‘ç¯å¢ƒ

#### 1. å…‹éš†ä»£ç åº“

```bash
git clone https://github.com/yourusername/bookagent.git
cd bookagent
```

#### 2. åç«¯è®¾ç½®

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
.\venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½®é…ç½®

# å¯åŠ¨åç«¯
uvicorn bookagent.main:app --reload
```

#### 3. å‰ç«¯è®¾ç½®

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å‰ç«¯
npm run dev
```

### è®¿é—®åº”ç”¨

- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **åç«¯ API**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/api/docs

## API ä½¿ç”¨ç¤ºä¾‹

### 1. ç”¨æˆ·è®¤è¯

```bash
# è·å–è®¿é—®ä»¤ç‰Œ
curl -X 'POST' \
  'http://localhost:8000/api/v1/auth/token' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -d 'grant_type=password&username=admin&password=yourpassword'
```

### 2. åˆ›å»ºå›¾ä¹¦

```bash
# åˆ›å»ºæ–°å›¾ä¹¦
curl -X 'POST' \
  'http://localhost:8000/api/v1/books/' \
  -H 'accept: application/json' \
  -H 'Authorization: Bearer YOUR_ACCESS_TOKEN' \
  -H 'Content-Type: application/json' \
  -d '{
    "title": "Pythoné«˜çº§ç¼–ç¨‹",
    "description": "æ·±å…¥ç†è§£Pythoné«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µ",
    "status": "draft"
  }'
```

### 3. ç”Ÿæˆç« èŠ‚å†…å®¹

```bash
# ä½¿ç”¨AIç”Ÿæˆç« èŠ‚å†…å®¹
curl -X 'POST' \
  'http://localhost:8000/api/v1/ai/generate/chapter' \
  -H 'accept: application/json' \
  -H 'Authorization: Bearer YOUR_ACCESS_TOKEN' \
  -H 'Content-Type: application/json' \
  -d '{
    "topic": "Pythonè£…é¥°å™¨è¯¦è§£",
    "style": "technical",
    "language": "zh",
    "length": "medium"
  }'
```

## é¡¹ç›®ç»“æ„

```
bookagent/
â”œâ”€â”€ alembic/                  # æ•°æ®åº“è¿ç§»è„šæœ¬
â”œâ”€â”€ bookagent/                # åº”ç”¨ä¸»åŒ…
â”‚   â”œâ”€â”€ app/                  # åº”ç”¨ä»£ç 
â”‚   â”‚   â”œâ”€â”€ api/              # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ models/           # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/          # Pydanticæ¨¡å‹
â”‚   â”‚   â””â”€â”€ services/         # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ migrations/           # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ tests/                # æµ‹è¯•ä»£ç 
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore
â”œâ”€â”€ alembic.ini              # Alembicé…ç½®
â”œâ”€â”€ main.py                  # åº”ç”¨å…¥å£
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜
â””â”€â”€ requirements.txt         # ä¾èµ–åˆ—è¡¨
```

## å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ `black` è¿›è¡Œä»£ç æ ¼å¼åŒ–
- ä½¿ç”¨ `isort` è¿›è¡Œå¯¼å…¥æ’åº
- ä½¿ç”¨ `mypy` è¿›è¡Œç±»å‹æ£€æŸ¥

### æµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š

```bash
pytest
```

### ä»£ç æäº¤

æäº¤ä»£ç å‰è¯·ç¡®ä¿ï¼š

1. æ‰€æœ‰æµ‹è¯•é€šè¿‡
2. ä»£ç å·²æ ¼å¼åŒ–
3. ç±»å‹æ£€æŸ¥é€šè¿‡

## éƒ¨ç½²

### ä½¿ç”¨ Docker éƒ¨ç½²

1. å®‰è£… Docker å’Œ Docker Compose
2. å¤åˆ¶å¹¶é…ç½® `.env` æ–‡ä»¶
3. è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
docker-compose up -d
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚

## è®¸å¯è¯

[MIT License](LICENSE)

## ç³»ç»Ÿæ¶æ„

```mermaid
graph TD
    A[ç”¨æˆ·ç•Œé¢] -->|è¾“å…¥éœ€æ±‚| B[æ™ºèƒ½ä½“æ§åˆ¶å™¨]
    B --> C[å†…å®¹ç”Ÿæˆæ¨¡å—]
    B --> D[æ¨¡æ¿ç®¡ç†æ¨¡å—]
    B --> E[äº¤äº’å¼ç¼–è¾‘æ¨¡å—]
    C --> F[å¤§è¯­è¨€æ¨¡å‹]
    D --> G[Wordæ¨¡æ¿åº“]
    E --> H[ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ]
    F --> C
    G --> D
    H --> E
    A <-->|äº¤äº’| E
```

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. æ™ºèƒ½ä½“æ§åˆ¶å™¨

#### 1.1 æŒ‡ä»¤è§£æå™¨
- è‡ªç„¶è¯­è¨€ç†è§£ï¼šè§£æç”¨æˆ·è¾“å…¥ï¼Œè¯†åˆ«æ„å›¾å’Œå‚æ•°
- ä»»åŠ¡è°ƒåº¦ï¼šæ ¹æ®æŒ‡ä»¤ç±»å‹åˆ†å‘ç»™å¯¹åº”æ¨¡å—
- çŠ¶æ€ç®¡ç†ï¼šç»´æŠ¤ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€å’Œä¸Šä¸‹æ–‡

#### 1.2 å·¥ä½œæµå¼•æ“
- ä»»åŠ¡ç¼–æ’ï¼šå®šä¹‰å’Œæ‰§è¡Œå†…å®¹ç”Ÿæˆæµç¨‹
- å¼‚å¸¸å¤„ç†ï¼šæ•è·å’Œå¤„ç†å„æ¨¡å—å¼‚å¸¸
- æ€§èƒ½ç›‘æ§ï¼šè®°å½•å„ç¯èŠ‚æ‰§è¡Œæ—¶é—´å’Œèµ„æºå ç”¨

### 2. å†…å®¹ç”Ÿæˆæ¨¡å—

#### 2.1 æ–‡æœ¬ç”Ÿæˆå™¨
- åŸºäºå¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡æŠ€æœ¯å†…å®¹
- æ”¯æŒå¤šè½®è¿­ä»£ä¼˜åŒ–
- å†…å®¹é£æ ¼æ§åˆ¶

#### 2.2 å›¾è¡¨ç”Ÿæˆå™¨
- è‡ªåŠ¨ç”ŸæˆæŠ€æœ¯æ¶æ„å›¾
- æ”¯æŒæµç¨‹å›¾ã€ç±»å›¾ç­‰å¸¸ç”¨æŠ€æœ¯å›¾è¡¨
- å›¾è¡¨æ ·å¼è‡ªå®šä¹‰

#### 2.3 çŸ¥è¯†åº“é›†æˆ
- æŠ€æœ¯æ–‡æ¡£æ£€ç´¢
- ä»£ç ç¤ºä¾‹åº“
- æœ€ä½³å®è·µæŒ‡å—

### 3. æ¨¡æ¿ç®¡ç†æ¨¡å—

#### 3.1 æ¨¡æ¿è§£æå™¨
- è§£æWordæ–‡æ¡£æ¨¡æ¿
- æå–å ä½ç¬¦å’Œå˜é‡
- æ”¯æŒæ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ç»“æ„

#### 3.2 æ ·å¼ç®¡ç†å™¨
- ç»´æŠ¤æ–‡æ¡£æ ·å¼è§„èŒƒ
- è‡ªåŠ¨åº”ç”¨æ ·å¼
- æ”¯æŒè‡ªå®šä¹‰æ ·å¼

#### 3.3 æ¨¡æ¿ç‰ˆæœ¬æ§åˆ¶
- æ¨¡æ¿ç‰ˆæœ¬ç®¡ç†
- å˜æ›´å†å²è®°å½•
- ç‰ˆæœ¬å›æ»šåŠŸèƒ½

### 4. äº¤äº’å¼ç¼–è¾‘æ¨¡å—

#### 4.1 å®æ—¶åä½œ
- å¤šç”¨æˆ·å®æ—¶ç¼–è¾‘
- æ“ä½œå†²çªè§£å†³
- ååŒå…‰æ ‡æ˜¾ç¤º

#### 4.2 è¯„è®ºä¸æ‰¹æ³¨
- æ·»åŠ æ‰¹æ³¨
- @æåŠåä½œè€…
- è®¨è®ºçº¿ç¨‹ç®¡ç†

#### 4.3 ç‰ˆæœ¬å¯¹æ¯”
- ç‰ˆæœ¬å·®å¼‚å¯è§†åŒ–
- é€‰æ‹©æ€§æ¢å¤
- å˜æ›´å†å²æµè§ˆ

## æŠ€æœ¯å®ç°

### 1. æŠ€æœ¯æ ˆ

#### åç«¯
- ç¼–ç¨‹è¯­è¨€ï¼šPython 3.9+
- Webæ¡†æ¶ï¼šFastAPI
- æ•°æ®åº“ï¼šPostgreSQL + Redis
- ä»»åŠ¡é˜Ÿåˆ—ï¼šCelery
- å­˜å‚¨ï¼šMinIO

#### å‰ç«¯
- æ¡†æ¶ï¼šReact + TypeScript
- å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼šTinyMCE
- å›¾è¡¨åº“ï¼šMermaid.js
- çŠ¶æ€ç®¡ç†ï¼šRedux Toolkit

### 2. é›†æˆæœåŠ¡

#### å¤§è¯­è¨€æ¨¡å‹
- OpenAI GPT-4 API
- æœ¬åœ°éƒ¨ç½²çš„å¼€æºæ¨¡å‹ï¼ˆå¯é€‰ï¼‰
- æ¨¡å‹å¾®è°ƒæ¥å£

#### æ–‡æ¡£å¤„ç†
- python-docxï¼šWordæ–‡æ¡£å¤„ç†
- Pandocï¼šæ–‡æ¡£æ ¼å¼è½¬æ¢
- WeasyPrintï¼šPDFç”Ÿæˆ

## éƒ¨ç½²æ¶æ„

```mermaid
flowchart TB
    subgraph è´Ÿè½½å‡è¡¡
    LB[NGINX]
    end
    
    subgraph åº”ç”¨æœåŠ¡å™¨
    A1[FastAPI] --> B1[PostgreSQL]
    A1 --> C1[Redis]
    A1 --> D1[MinIO]
    end
    
    subgraph å·¥ä½œèŠ‚ç‚¹
    W1[Celery Worker]
    W2[Celery Beat]
    end
    
    LB -->|è¯·æ±‚| A1
    A1 -->|å¼‚æ­¥ä»»åŠ¡| W1
    W2 -->|å®šæ—¶ä»»åŠ¡| W1
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:password@localhost:5432/bookagent
REDIS_URL=redis://localhost:6379/0

# å­˜å‚¨é…ç½®
STORAGE_ENDPOINT=localhost:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STORAGE_BUCKET=bookagent

# å¤§æ¨¡å‹é…ç½®
OPENAI_API_KEY=your-api-key
MODEL_NAME=gpt-4
TEMPERATURE=0.7
```

## å¼€å‘æŒ‡å—

### ç¯å¢ƒå‡†å¤‡

1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

2. åˆå§‹åŒ–æ•°æ®åº“
```bash
alembic upgrade head
```

3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
uvicorn app.main:app --reload
```

## ä½¿ç”¨ç¤ºä¾‹

### ç”Ÿæˆæ–°ç« èŠ‚

```python
from bookagent import BookAgent

agent = BookAgent()
chapter = agent.generate_chapter(
    topic="å¾®æœåŠ¡æ¶æ„è®¾è®¡",
    template="standard",
    style="academic"
)
print(chapter.content)
```

### äº¤äº’å¼ç¼–è¾‘

```python
# å¼€å§‹ç¼–è¾‘ä¼šè¯
session = agent.start_edit_session(chapter_id=123)

# è·å–å»ºè®®ä¿®æ”¹
suggestions = session.get_suggestions()

# åº”ç”¨ä¿®æ”¹
session.apply_edit(suggestions[0])

# ä¿å­˜æ›´æ”¹
session.save()
```

## è®¸å¯è¯

MIT License
